<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Опрос для экспатов</title>
  <style>
    body{
      font-family: Bimini, sans-serif;
      margin:0; padding:0;
      background:#fff;
      display:flex; justify-content:center; align-items:center;
      height:100vh;
    }
    #card{
      background:#fff; max-width:500px; width:92%;
      padding:24px 32px; border-radius:10px;
      box-shadow:0 4px 12px rgba(0,0,0,.15);
      text-align:center; transition:all .3s;
    }
    button{padding:10px 24px; font-size:18px; cursor:pointer; border:#000000; border-radius:6px; background:#fff; color:#000000;}
    button:hover{background:#a5be34;}
    .opt-btn{display:block; width:100%; background:#fff; margin:8px 0; font-size:16px;}
    .opt-btn:hover{background:#fff;}
    .selected{background:#a5be34 !important;}
    .disabled{opacity:.6; pointer-events:none;}
    input[type="text"], input[type="number"]{margin-top:10px; padding:8px; width:100%; font-size:15px; border:1px solid #ccc; border-radius:4px;}
    .nav{display:flex; justify-content:space-between; align-items:center; margin-top:20px;}
    .nav button{width:48%; font-size:20px; display:flex; justify-content:center; align-items:center; gap:6px;}
  </style>
</head>
<body>
  <div id="card">
    <!-- приветствие -->
 <div id="welcome">
  <img src="9e254348-c549-4f27-9682-f2f39e048cbd (1).png" alt="Приветствие" style="max-width:100%; margin-bottom:10px;">
  <h1>Добро пожаловать!</h1>
  <p>Пройдите короткий опрос, чтобы мы сделали лучшую платформу для аренды жилья.</p>
  <button id="startBtn">НАЧАТЬ</button>
</div>

    <!-- сюда динамически подставляется вопрос -->
    <div id="qa" style="display:none;"></div>

    <!-- финальный экран -->
    <div id="thanks" style="display:none;">
      <h2>Спасибо за ваши ответы!</h2>
      <p>Мы уже на шаг ближе к лучшему сервису.</p>
    </div>
  </div>

<script>
/********************************
 * Конфигурация вопросов        *
 ********************************/
const questions = [
  {text:'В какой город Вьетнама вы переехали или планируете переехать?', options:['Ханой','Хошимин','Дананг','Нячанг','Другое'], allowOther:true, type:'single'},
  {text:'Вы уже живёте во Вьетнаме или только планируете?', options:['Уже живу','Планирую','Другое'], allowOther:true, type:'single'},
  {text:'Как долго планируете арендовать жильё?', options:['1–3 месяца','3–6 месяцев','6–12 месяцев','Больше года','Другое'], allowOther:true, type:'single'},
  {text:'Какой месячный бюджет на аренду?', options:['< 400 USD','400–700 USD','700–1000 USD','> 1000 USD','Другое'], allowOther:true, type:'single'},
  {text:'Какой тип жилья вы ищете?', options:['Квартира','Дом целиком','Комната','Студия','Другое'], allowOther:true, type:'single'},
  {text:'С какими сложностями вы сталкивались при поиске? (можно выбрать несколько)', options:['Недостоверные фото','Завышенная цена для иностранцев','Недостаток информации о квартире','Языковой барьер','Сложно найти по нужным параметрам','Другое'], allowOther:true, type:'multi', maxSelect:null},
  {text:'Что для вас важнее всего при выборе жилья? (выберите 3 главных)', options:['Цена','Район / расположение','Качество ремонта','Меблировка','Наличие бытовой техники','Безопасность','Интернет','Вид из окна','Тишина','Инфраструктура вокруг (магазины, школы и пр.)'], allowOther:false, type:'multi', maxSelect:3},
  {text:'Беспокоит ли вас возврат депозита?', options:['Да, очень','Немного','Нет'], allowOther:false, type:'single'},
  {text:'Сталкивались ли вы с мошенничеством при аренде?', options:['Да','Нет','Не уверен(а)'], allowOther:false, type:'single'},
  {text:'С какими проблемами вы столкнулись во время проживания? (можно выбрать несколько)', options:['Плесень/сырость','Проблемы с водой','Перебои с электричеством','Медленный интернет','Шум','Насекомые','Плохая реакция хозяина на просьбы','Другое'], allowOther:true, type:'multi', maxSelect:null},
  {text:'Насколько для вас важна близость к работе? (1 — не важна, 5 — очень важна)', options:['1','2','3','4','5'], allowOther:false, type:'single'},
  {text:'Насколько для вас важна близость к международным школам? (1 — не важна, 5 — очень важна)', options:['1','2','3','4','5'], allowOther:false, type:'single'},
  {text:'Насколько для вас важна близость к кафе/магазинам/супермаркетам? (1 — не важна, 5 — очень важна)', options:['1','2','3','4','5'], allowOther:false, type:'single'},
  {text:'Насколько для вас важна близость к паркам/зонам отдыха? (1 — не важна, 5 — очень важна)', options:['1','2','3','4','5'], allowOther:false, type:'single'},
  {text:'Насколько легко вам было общаться с арендодателями?', options:['Очень легко','Скорее легко','Скорее сложно','Очень сложно'], allowOther:false, type:'single'},
  {text:'Какие проблемы возникали в коммуникации? (можно выбрать несколько)', options:['Язык','Разные ожидания','Медленные ответы','Другое'], allowOther:true, type:'multi', maxSelect:null},
  {text:'Какую сумму вы готовы платить в месяц за долгосрочную аренду?', options:['до 300 USD','300–500 USD','500–800 USD','800–1200 USD','более 1200 USD'], allowOther:false, type:'single'}
];

/********************************
 * Состояние опроса             *
 ********************************/
let current = 0;
const answers = [];

const welcomeEl = document.getElementById('welcome');
const qaEl      = document.getElementById('qa');
const thanksEl  = document.getElementById('thanks');

// запуск опроса
document.getElementById('startBtn').addEventListener('click',() => {
  welcomeEl.style.display='none';
  qaEl.style.display='block';
  renderQuestion();
});

/********************************
 * Отрисовка текущего вопроса   *
 ********************************/
function renderQuestion(){
  const q = questions[current];
  qaEl.innerHTML = `<h2>${q.text}</h2>`;

  const optsDiv = document.createElement('div');
  qaEl.appendChild(optsDiv);

  let selectedChoice = null;
  const selectedSet = new Set();
  let otherInput = null;

  // создаём кнопки вариантов
  q.options.forEach(opt=>{
    const btn = document.createElement('button');
    btn.className='opt-btn';
    btn.textContent=opt;
    optsDiv.appendChild(btn);

    btn.onclick = ()=>{
      if(opt==='Другое'){
        if(otherInput){
          btn.style.display='none';
          otherInput.style.display='block';
          otherInput.focus();
        }
        return;
      }
      if(q.type==='single'){
        // снять предыдущее выделение
        optsDiv.querySelectorAll('.opt-btn').forEach(b=>b.classList.remove('selected'));
        selectedChoice = opt;
        btn.classList.add('selected');
      }else{ // multi
        if(selectedSet.has(opt)){
          selectedSet.delete(opt);
          btn.classList.remove('selected');
        }else{
          if(q.maxSelect && selectedSet.size>=q.maxSelect) return;
          selectedSet.add(opt);
          btn.classList.add('selected');
        }
      }
      updateNavState();
    };
  });

  // поле для "Другое"
  if(q.allowOther){
    otherInput = document.createElement('input');
    otherInput.type='text';
    otherInput.placeholder='Укажите свой вариант';
    otherInput.style.display='none';
    qaEl.appendChild(otherInput);
    otherInput.addEventListener('input',()=>{
      if(q.type==='single'){
        selectedChoice = otherInput.value.trim()? otherInput.value.trim():null;
      }
      updateNavState();
    });
  }

  // навигация
  const nav = document.createElement('div');
  nav.className='nav';
  qaEl.appendChild(nav);

  const backBtn = document.createElement('button');
  backBtn.innerHTML='<';
  if(current===0) backBtn.classList.add('disabled');
  backBtn.onclick = ()=>{
    if(current===0) return;
    current--;
    answers.pop();
    renderQuestion();
  };
  nav.appendChild(backBtn);

  const nextBtn = document.createElement('button');
  nextBtn.innerHTML='>';
  nextBtn.classList.add('disabled');
  nav.appendChild(nextBtn);

  nextBtn.onclick = ()=>{
    if(nextBtn.classList.contains('disabled')) return;
    let answerValue;
    if(q.type==='single'){
      answerValue = selectedChoice;
    }else{
      answerValue = Array.from(selectedSet);
      if(otherInput && otherInput.value.trim()) answerValue.push(otherInput.value.trim());
    }
    answers.push({question:q.text, answer:answerValue});
    current++;
    if(current<questions.length){
      renderQuestion();
    }else{
      qaEl.style.display='none';
      thanksEl.style.display='block';
      console.log('Ответы пользователя:',answers);
    }
  };

  function updateNavState(){
    let canProceed = false;
    if(q.type==='single'){
      canProceed = !!selectedChoice;
    }else{
      canProceed = selectedSet.size>0 || (otherInput && otherInput.value.trim());
    }
    nextBtn.classList.toggle('disabled',!canProceed);
  }
}
</script>
</body>
</html>
